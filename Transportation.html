<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transportation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: rosybrown;
      color: white;
      padding: 10px 20px;
      text-align: center;
    }

    #map-container {
      width: 100%;
      height: 500px;
      margin-top: 20px;
    }

    .search-bar {
      display: flex;
      justify-content: center;
      margin: 20px;
    }

    .search-bar input[type="text"] {
      width: 60%;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px 0 0 4px;
    }

    .search-bar button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: lightpink;
      color: white;
      border: 0;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
    }

    .search-bar button:hover {
      background-color: green;
    }

    #country-data {
      padding: 20px;
      background-color: #f1f1f1;
      margin-top: 20px;
    }

    #country-data h2 {
      text-align: center;
    }

    #country-data .countries p {
      margin: 5px 0;
      padding: 8px;
      border-radius: 4px;
      text-align: left;
    }

    footer {
      text-align: center;
      padding: 10px;
      background-color: rosybrown;
      color: white;
      position: fixed;
      bottom: 0;
      width: 100%;
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
</head>
<body>
  <header>
    <h1>Transportation</h1>
    <p>Explore locations and plan your routes!</p>
  </header>

  <!-- Search Bar -->
  <div class="search-bar">
    <input type="text" id="location-input" placeholder="Enter a location" aria-label="Search location">
    <button onclick="searchLocation()">Search</button>
  </div>

  <!-- Map Container -->
  <div id="map-container"></div>

  <!-- Country Data Section -->
  <div id="country-data">
    <h2>Countries and Their Index</h2>
    <div class="countries">
      <p style="color:violet;">1. Bangladesh - 79.9</p>
      <p style="color:violet;">2. Pakistan - 73.7</p>
      <p style="color:orange;">3. India - 54.4</p>
      <!-- Add more countries here -->
    </div>
  </div>

  <footer>
    <p>Smart City Solutions © 2024</p>
  </footer>

  <!-- Leaflet.js -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    (function() {
      let map;
      let marker;

      // Initialize the map
      function initMap() {
        map = L.map('map-container').setView([37.7749, -122.4194], 10); // Default to San Francisco
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: 'Map data © <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
        }).addTo(map);
      }

      // Search location and update the map
      function searchLocation() {
        const locationInput = document.getElementById('location-input');
        const location = locationInput.value.trim();

        if (!location) {
          alert('Please enter a location!');
          return;
        }

        fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(location)}`)
          .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.json();
          })
          .then(data => {
            if (data.length === 0) {
              alert('Location not found!');
              return;
            }

            const { lat, lon, display_name } = data[0];
            map.setView([lat, lon], 13);

            if (marker) {
              map.removeLayer(marker);
            }

            marker = L.marker([lat, lon]).addTo(map)
              .bindPopup(`<b>${display_name}</b>`).openPopup();
          })
          .catch(error => {
            console.error('Error fetching location:', error);
            alert('An error occurred. Please try again.');
          });
      }

      // Initialize map on page load
      document.addEventListener('DOMContentLoaded', initMap);

      // Expose searchLocation to global scope
      window.searchLocation = searchLocation;
    })();
  </script>
</body>
</html>
